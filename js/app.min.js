!function(){function e(e){return document.getElementById(e)}function t(){function e(){t=60/p*1e3,d||(n(x[f]),s(f),progress.style.transition="width "+t+"ms linear",f++),f>=x.length&&(f=0,d=!0,pausePlayIcon.innerText="replay"),g=setTimeout(e,t)}x=x.trim().split(/\s+/);var t=60/p*1e3;d=!1,f=0,e()}function n(e){var t=e.length/2;leftChars=e.substring(0,t),rightChars=e.substring(t,e.length),midChars=rightChars[0],rightChars=rightChars.substring(1),left.innerText=leftChars,middle.innerText=midChars,right.innerText=rightChars}function o(e){e.style.visibility="hidden",e.style.opacity=0}function r(e){e.style.visibility="visible",e.style.opacity=1}function s(e){progress.style.width=1*e/(x.length-1)*100+"%"}function i(){p=parseInt(wpmSelect.value),d?(d=!1,pausePlayIcon.innerText="pause"):(d=!0,pausePlayIcon.innerText="play_arrow")}function a(e,t){document.addEventListener(e,t)}function l(e){u(e),a("mouseup",c),a("touchend",c),a("mousemove",u),a("touchmove",u)}function u(e){e.touches?posX=e.touches[0].clientX:posX=e.clientX,bound=h.getBoundingClientRect(),f=Math.round((posX-bound.left)/bound.width*(x.length-1)),f<0?f=0:f>x.length-1&&(f=x.length-1),d=!0,pausePlayIcon.innerText="play_arrow",n(x[f]),s(f),progress.style.transition=""}function c(e){return document.removeEventListener("mousemove",u),document.removeEventListener("touchmove",u),!1}textBox=e("textbox"),wpmSelect=e("wpm"),left=e("left"),middle=e("middle"),right=e("right"),exit=e("exit"),progress=e("progress"),readerView=e("readerView"),pausePlayIcon=e("pauseIcon"),uploadIcon=e("uploadIcon"),textBox.focus();var d,p,g,x,f;start.onclick=function(){r(readerView),textBox.style.filter="blur(6px)",textbox.style["user-select"]="none",o(start),clearTimeout(g),p=parseInt(wpmSelect.value),x=textBox.value,t()},exit.onclick=function(){o(readerView),textBox.style.filter="",textbox.style["user-select"]="auto",textbox.focus(),r(start)},e("pauseplay").onclick=i,document.body.onkeyup=function(e){32==e.keyCode&&i()},wpmSelect.onchange=function(){p=parseInt(wpmSelect.value)};var h=e("progress-total");h.addEventListener("mousedown",l),h.addEventListener("touchstart",l),textBox.ondragover=function(e){dt=e.dataTransfer,dt.types&&(dt.types.indexOf?dt.types.indexOf("Files")!=-1:dt.types.contains("Files"))&&(e.preventDefault(),e.stopPropagation(),textBox.classList.add("dragging"),uploadIcon.classList.add("dragging-upload"))},textBox.ondragleave=function(e){e.preventDefault(),e.stopPropagation(),textBox.classList.remove("dragging"),uploadIcon.classList.remove("dragging-upload")},textBox.ondrop=function(e){e.preventDefault(),e.stopPropagation(),file=e.dataTransfer.files[0];var t=new FileReader;t.onload=function(e){var t=e.target.result;textBox.value=t,textBox.classList.remove("dragging"),uploadIcon.classList.remove("dragging-upload")},t.readAsText(file)}}();
